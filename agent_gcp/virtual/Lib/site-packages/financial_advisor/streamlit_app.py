import streamlit as st
from integrated_fomc_financial_agent import run_integrated_agent

st.title("MPC + Financial Advisor Integration Demo")

st.markdown("""
This app lets you:
- Log in with your phone number and OTP (must match a folder in test_data_dir, OTP is 123456)
- Enter a prompt for the MPC (Monetary Policy Committee) research agent
- Enter a prompt for the Financial Advisor agent
- See the combined result
""")

with st.form("login_form"):
    phone_number = st.text_input("Phone Number (10 digits)")
    otp = st.text_input("OTP (use 123456)")
    mpc_prompt = st.text_area("MPC Agent Prompt", "Analyze the latest MPC meeting.")
    fin_prompt = st.text_area("Financial Advisor Prompt", "What should I do with my portfolio?")
    submitted = st.form_submit_button("Submit")

if submitted:
    with st.spinner("Running agents..."):
        result = run_integrated_agent(phone_number, otp, mpc_prompt, fin_prompt)
    st.subheader("Result from Financial Advisor Agent:")
    st.write(result)
    if isinstance(result, dict) and 'error' in result:
        st.error(result['error'])
    else:
        st.success("Success! See output above.") 